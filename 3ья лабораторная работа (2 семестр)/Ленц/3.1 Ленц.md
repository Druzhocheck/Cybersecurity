# Лабораторная работа 3.1
## Ленц Олег

### Этап 1. Создание VPS сервера

1. Создаем аккаунт в Celestel;
2. Создаем облачную платформу в Новосибирске с ОС Ubuntu20. Выбираем недорогую конфигурацию (1 ядро, 1 Гб ОЗУ и 10 Гб памяти) и создаем сервер.

### Этап 2. Установка и конфигурация Wireguard

1. Обновляем сервер с помощью команды ` apt update & apt upgrade -y `
2. Устанавливаем Wireguard - ` apt install -y wireguard `
3. Создаем ключи - ` wg genkey | tee /etc/wireguard/privatekey | wg pubkey | tee /etc/wireguard/publickey `
4. Добавляем проброс пакетов - ` echo "net.ipv4.ip_forward=1" >> /etc/sysctl.conf `
5. Создаем конфигурацию сервера:
```[Interface]
Address = 10.0.0.1/24
PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE
ListenPort = 51820
PrivateKey = <SERVER-PRIV-KEY>
[Peer]
PublicKey = <СLIENT-PUBLIC-KEY>
AllowedIPs = 10.0.0.2/32 ```

6. Добавляем сервер в автозагрузку - ` systemctl enable wg-quick@wg0.service `
7. Включаем - ` systemctl start wg-quick@wg0.service `
8. Создаем ключи клиента - ` wg genkey | tee /etc/wireguard/client_priv | wg pubkey | tee /etc/wireguard/client_pub `
9. Создаем конфигурацию клиента:
``` [Interface]
PrivateKey = <CLIENT_PRIVATE_KEY>
Address = 10.0.0.2/32
DNS = 8.8.8.8
[Peer]
PublicKey = <SERVER-PUBKEY>
Endpoint = 79.141.65.147:51820
AllowedIPs = 0.0.0.0/0
PersistentKeepalive = 20 ```

### Этап 3. Анализ трафика с помощью Wireshark

1. Устанавливаем Wireshark на свою систему.
2. Устанавливаем VPN подключение с сервером.
3. Сниффим трафик интернет соединения.
